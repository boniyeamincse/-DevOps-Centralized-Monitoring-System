#################### Zabbix Agent 2 (Linux/Windows) ####################
# Works for both OS with path tweaks. Ship this as a template and adjust paths.

############ Basic ############
# Server (passive checks) and ServerActive (active checks)
Server=10.0.0.10,10.0.0.11
ServerActive=10.0.0.10:10051

# Hostname visible in Zabbix UI (or use system.hostname key via HostnameItem)
Hostname=HOSTNAME_PLACEHOLDER
# HostnameItem=system.hostname

# Optional auto-registration classification
HostMetadata=env=prod;role=server;os=${ZBX_OS}

############ Logs ############
# Linux default:
LogFile=/var/log/zabbix/zabbix_agent2.log
# Windows alternative:
# LogFile=C:\ProgramData\zabbix\zabbix_agent2.log
LogFileSize=10
DebugLevel=3

############ Performance ############
Timeout=5
Include=/etc/zabbix/zabbix_agent2.d/*.conf

############ TLS ############
# Use one of the secure modes: psk or cert.
# ---- PSK example ----
# TLSConnect=psk
# TLSAccept=psk
# TLSPSKIdentity=ZBX_PSK_ID
# TLSPSKFile=/etc/zabbix/ssl/zabbix_agent2.psk
# ---- Cert example ----
# TLSConnect=cert
# TLSAccept=cert
# TLSCAFile=/etc/zabbix/ssl/ca.crt
# TLSCertFile=/etc/zabbix/ssl/agent.crt
# TLSKeyFile=/etc/zabbix/ssl/agent.key

############ Windows Exporter bridge (optional) ############
# If you already expose Prometheus metrics from Windows Exporter,
# you can still keep Zabbix Agent 2 for Windows eventlog/process checks.

############ UserParameters (optional custom checks) ############
# Example: Linux free disk on /
# UserParameter=disk.free.root,df -hP / | awk 'NR==2{print $$4}'
# Example: Ping to Prometheus
# UserParameter=ping.prometheus,/bin/ping -c1 -W1 prometheus >/dev/null && echo 1 || echo 0

############ Active agent buffer ############
BufferSend=5
BufferSize=100
MaxLinesPerSecond=100

############ Plugins (Agent2) ############
# Enable/Configure popular plugins
# Plugins.SystemRun.Timeout=3
# Plugins.Log.Enabled=true
# Plugins.Metrics.Enabled=true
