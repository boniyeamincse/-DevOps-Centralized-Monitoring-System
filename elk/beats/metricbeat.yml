# Metricbeat for metric shipping (Linux/Windows)

metricbeat.config.modules:
  path: ${path.config}/modules.d/*.yml
  reload.enabled: true

# System module (CPU, memory, disk, network)
metricbeat.modules:
- module: system
  period: 10s
  metricsets:
    - cpu
    - load
    - memory
    - network
    - process
    - process_summary

# Docker module (uncomment if monitoring Docker)
# - module: docker
#   metricsets:
#     - "container"
#     - "cpu"
#     - "diskio"
#     - "healthcheck"
#     - "info"
#     - "memory"
#     - "network"
#   hosts: ["unix:///var/run/docker.sock"]
#   period: 10s
#   enabled: true

# Choose ONE output. Elasticsearch direct OR Logstash.
# ---- Elasticsearch (direct) ----
output.elasticsearch:
  hosts: ["http://elasticsearch:9200"]
  # protocol: "https"
  # username: "elastic"
  # password: "changeme"
  index: "metricbeat-%{+yyyy.MM.dd}"

# ---- Logstash (via :5044) ----
# output.logstash:
#   hosts: ["logstash:5044"]

setup.template.enabled: true
setup.template.settings:
  index.number_of_shards: 1
  index.codec: best_compression

# Kibana for dashboards preloading (optional)
setup.kibana:
  host: "http://kibana:5601"

# Logging
logging.to_files: true
logging.files:
  path: /var/log/metricbeat
  name: metricbeat
  keepfiles: 7
  rotateeverybytes: 10485760
